<!-- TBD: enable redirect when fixed -->
<div class="item-wrapper">
  <!-- <div class="item-wrapper" (click)="redirectToDetailed()"> -->
  <div class="item">
    <p-timeline [value]="events" layout="horizontal" align="top" class="timeline">
      <ng-template pTemplate="marker" let-event>
        <span class="marker" [class]="event.duration ? 'custom-marker' : 'time-marker'">{{
          event.duration ? event.duration : (event.date | date: 'HH:mm')
        }}</span>
      </ng-template>

      <ng-template pTemplate="content" let-event>
        <div class="p-timeline-event-content timeline-content">
          <ng-container>
            <div class="event-details">
              <div>{{ event.city }}</div>
              <div>{{ event.date | date: 'dd-MMM-yyyy' }}</div>
            </div>
          </ng-container>
        </div>
      </ng-template>
    </p-timeline>

    <div class="route-wrapper">
      <div class="from-to-stations">
        <i class="material-icons">train</i>{{ resultItem.routeStartStation }} - {{ resultItem.routeEndStation }}
      </div>

      <span>Ride ID: {{ resultItem.rideId }}</span>

      <p-button #buttonElement class="route-button" label="Route" text (click)="openModal($event)">
        <i class="material-icons">route</i>
      </p-button>
    </div>
  </div>
  <div class="carriages-info">
    @let carriageInfo = resultItem.carriageInfo;
    @for (carriage of carriageInfo; track carriage.type) {
      <div class="carriage-info">
        <div class="carriage-type">{{ carriage.type }}</div>
        <div class="carriage-free-seats">{{ carriage.freeSeats }} free seats</div>
        <div class="carriage-price">{{ carriage.price | currency: 'USD' }}</div>
      </div>
    } @empty {
      <div class="no-carriage-info">Sold out</div>
    }
  </div>
</div>

<ng-template #modalContent>
  <app-trip-details [trip]="resultItem"></app-trip-details>
</ng-template>
