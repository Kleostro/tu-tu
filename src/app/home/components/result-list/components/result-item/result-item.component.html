<div class="item-wrapper" (click)="redirectToDetailed()">
  <div class="item">
    <app-trip-timeline
      [departureDate]="resultItem.tripDepartureDate"
      [arrivalDate]="resultItem.tripArrivalDate"
      [startStation]="resultItem.tripStartStation"
      [endStation]="resultItem.tripEndStation"
    ></app-trip-timeline>

    <div class="route-wrapper">
      <div class="from-to-stations">
        <i class="material-icons">train</i>{{ resultItem.routeStartStation }} - {{ resultItem.routeEndStation }}
      </div>

      <span>Ride ID: {{ resultItem.rideId }}</span>

      <p-button #buttonElement class="route-button" label="Route" text (click)="openModal($event)">
        <i class="material-icons">route</i>
      </p-button>
    </div>
  </div>
  <div class="carriages-info">
    @let sortedCarriageInfo = getSortedCarriageInfo();
    @for (carriage of sortedCarriageInfo; track carriage.type) {
      <div class="carriage-info">
        <div class="carriage-type">{{ carriage.name }}</div>
        <div class="carriage-free-seats">{{ carriage.freeSeats }} free seats</div>
        <div class="carriage-price">{{ carriage.price | currency: 'USD' }}</div>
      </div>
    } @empty {
      <div class="no-carriage-info">Sold out</div>
    }
  </div>
</div>

<ng-template #modalContent>
  <app-trip-details [trip]="resultItem"></app-trip-details>
</ng-template>
